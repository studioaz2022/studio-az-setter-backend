ğŸ’¬ GHL MESSAGE WEBHOOK HIT



ğŸ’¬ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•



ğŸ“¦ Webhook Payload (non-empty fields): {



  "contact_id": "CZj67OBSzvUzpsExstqD",



  "first_name": "Maria",



  "last_name": "Claflin",



  "full_name": "Maria Claflin",



  "tags": "dm consultation request",



  "date_created": "2025-12-15T06:37:39.685Z",



  "contact_type": "lead",



  "location": {



    "name": "Studio AZ Tattoo",



    "address": "333 Washington Ave N STE 100",



    "city": "Minneapolis",



    "state": "Minnesota",



    "country": "US",



    "postalCode": "55401",



    "fullAddress": "333 Washington Ave N STE 100, Minneapolis Minnesota 55401",



    "id": "mUemx2jG4wly4kJWBkI4"



  },



  "message": {



    "type": 11,



    "body": "Hey looking to get a tattoo!"



  },



  "workflow": {



    "id": "8cf237bb-6cb1-4240-8ca5-b797bba8b769",



    "name": "Testing Ai Bot"



  },



  "contact": {



    "attributionSource": {



      "photoUrl": null,



      "sessionSource": "Social media",



      "adId": null,



      "productId": null,



      "videoUrl": null,



      "mediumId": "24364584283244494",



      "utmContent": null,



      "pSid": "24364584283244494",



      "medium": "facebook",



      "postId": null,



      "flowId": null



    },



    "lastAttributionSource": {



      "photoUrl": null,



      "sessionSource": "Social media",



      "adId": null,



      "productId": null,



      "videoUrl": null,



      "mediumId": "24364584283244494",



      "utmContent": null,



      "pSid": "24364584283244494",



      "medium": "facebook",



      "postId": null,



      "flowId": null



    }



  },



  "customData": {



    "contactId": "CZj67OBSzvUzpsExstqD",



    "messageBody": "Hey looking to get a tattoo!"



  }



}



ğŸ“© Incoming message text: { type: 11, body: 'Hey looking to get a tattoo!' }



ğŸ‘¤ Contact ID: CZj67OBSzvUzpsExstqD



ğŸ‘¤ Contact: Maria Claflin



ğŸ“‹ Contact custom fields (non-empty): {}



ğŸ¤– Raw OpenAI opener response: {



  "language": "en",



  "bubbles": [



    "Hey Maria! What kind of piece are you thinking?",



    "Where on your body were you thinking to get it?"



  ],



  "internal_notes": "Starting intake phase, gathering basic tattoo idea and placement.",



  "meta": {



    "aiPhase": "intake",



    "leadTemperature": "warm",



    "wantsDepositLink": false,



    "depositPushedThisTurn": false,



    "mentionDecoyOffered": false,



    "consultMode": "online"



  },



  "field_updates": {}



}



ğŸ§­ [PHASE] derived_phase snapshot {



  derived_phase: 'intake',



  canonical: {



    tattooSummary: null,



    tattooPlacement: null,



    tattooSize: null,



    timeline: null,



    consultationType: null,



    consultationTypeLocked: false,



    depositLinkSent: false,



    depositPaid: false,



    holdAppointmentId: null



  },



  intents: {



    reschedule_intent: false,



    cancel_intent: false,



    scheduling_intent: false,



    slot_selection_intent: false,



    deposit_intent: false,



    consult_path_choice_intent: false,



    artist_guided_size_intent: false,



    process_or_price_question_intent: false,



    translator_affirm_intent: false



  },



  selected_handler: 'ai',



  routing_reason: 'ai_fallback',



  intent_flags: []



}



ğŸ¤– AI Response Summary: {



  bubblesCount: 2,



  phase: 'intake',



  handler: 'ai',



  reason: 'ai_fallback',



  fieldUpdatesKeys: []



}



âœ‰ï¸ sendConversationMessage context: { contactId: 'CZj67OBSzvUzpsExstqD', isDm: false, hasPhone: false }



ğŸ“¨ GHL conversations API response (fallback): { status: 201, contactId: 'CZj67OBSzvUzpsExstqD', type: 'FB' }



âœ‰ï¸ sendConversationMessage context: { contactId: 'CZj67OBSzvUzpsExstqD', isDm: false, hasPhone: false }



ğŸ“¨ GHL conversations API response (fallback): { status: 201, contactId: 'CZj67OBSzvUzpsExstqD', type: 'FB' }



ğŸ“¤ Sent 2/2 bubbles to GHL conversation



â„¹ï¸ No field_updates from AI to persist this turn



ğŸ’¬ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•





     ==> Detected service running on port 10000


     ==> Docs on specifying a port: https://render.com/docs/web-services#port-binding






ğŸ’¬ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•



ğŸ’¬ GHL MESSAGE WEBHOOK HIT



ğŸ’¬ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•



ğŸ“¦ Webhook Payload (non-empty fields): {



  "contact_id": "CZj67OBSzvUzpsExstqD",



  "first_name": "Maria",



  "last_name": "Claflin",



  "full_name": "Maria Claflin",



  "tags": "dm consultation request",



  "date_created": "2025-12-15T06:37:39.685Z",



  "contact_type": "lead",



  "location": {



    "name": "Studio AZ Tattoo",



    "address": "333 Washington Ave N STE 100",



    "city": "Minneapolis",



    "state": "Minnesota",



    "country": "US",



    "postalCode": "55401",



    "fullAddress": "333 Washington Ave N STE 100, Minneapolis Minnesota 55401",



    "id": "mUemx2jG4wly4kJWBkI4"



  },



  "message": {



    "type": 11,



    "body": "I was thinking of getting a skateboard on my forearm"



  },



  "workflow": {



    "id": "8cf237bb-6cb1-4240-8ca5-b797bba8b769",



    "name": "Testing Ai Bot"



  },



  "contact": {



    "attributionSource": {



      "photoUrl": null,



      "sessionSource": "Social media",



      "adId": null,



      "productId": null,



      "videoUrl": null,



      "mediumId": "24364584283244494",



      "utmContent": null,



      "pSid": "24364584283244494",



      "medium": "facebook",



      "postId": null,



      "flowId": null



    },



    "lastAttributionSource": {



      "photoUrl": null,



      "sessionSource": "Social media",



      "adId": null,



      "productId": null,



      "videoUrl": null,



      "mediumId": "24364584283244494",



      "utmContent": null,



      "pSid": "24364584283244494",



      "medium": "facebook",



      "postId": null,



      "flowId": null



    }



  },



  "customData": {



    "contactId": "CZj67OBSzvUzpsExstqD",



    "messageBody": "I was thinking of getting a skateboard on my forearm"



  }



}



ğŸ“© Incoming message text: {



  type: 11,



  body: 'I was thinking of getting a skateboard on my forearm'



}



ğŸ‘¤ Contact ID: CZj67OBSzvUzpsExstqD



ğŸ‘¤ Contact: Maria Claflin



ğŸ“‹ Contact custom fields (non-empty): {}



ğŸ¤– Raw OpenAI opener response: {



  "language": "en",



  "bubbles": [



    "Sick idea â€” a skateboard on your forearm will look clean.",



    "Roughly how big were you thinking for the size?"



  ],



  "internal_notes": "Acknowledged tattoo idea and asked for size to continue intake.",



  "meta": {



    "aiPhase": "intake",



    "leadTemperature": "warm",



    "wantsDepositLink": false,



    "depositPushedThisTurn": false,



    "mentionDecoyOffered": false,



    "consultMode": "online"



  },



  "field_updates": {



    "tattoo_placement": "forearm",



    "tattoo_summary": "skateboard tattoo on forearm"



  }



}



ğŸ§­ [PHASE] derived_phase snapshot {



  derived_phase: 'discovery',



  canonical: {



    tattooSummary: 'skateboard tattoo on forearm',



    tattooPlacement: 'forearm',



    tattooSize: null,



    timeline: null,



    consultationType: null,



    consultationTypeLocked: false,



    depositLinkSent: false,



    depositPaid: false,



    holdAppointmentId: null



  },



  intents: {



    reschedule_intent: false,



    cancel_intent: false,



    scheduling_intent: false,



    slot_selection_intent: false,



    deposit_intent: false,



    consult_path_choice_intent: false,



    artist_guided_size_intent: false,



    process_or_price_question_intent: false,



    translator_affirm_intent: false



  },



  selected_handler: 'ai',



  routing_reason: 'ai_fallback',



  intent_flags: []



}



ğŸ¤– AI Response Summary: {



  bubblesCount: 2,



  phase: 'discovery',



  handler: 'ai',



  reason: 'ai_fallback',



  fieldUpdatesKeys: [ 'tattoo_placement', 'tattoo_summary' ]



}



âœ‰ï¸ sendConversationMessage context: { contactId: 'CZj67OBSzvUzpsExstqD', isDm: false, hasPhone: false }



ğŸ“¨ GHL conversations API response (fallback): { status: 201, contactId: 'CZj67OBSzvUzpsExstqD', type: 'FB' }



âœ‰ï¸ sendConversationMessage context: { contactId: 'CZj67OBSzvUzpsExstqD', isDm: false, hasPhone: false }



ğŸ“¨ GHL conversations API response (fallback): { status: 201, contactId: 'CZj67OBSzvUzpsExstqD', type: 'FB' }



ğŸ“¤ Sent 2/2 bubbles to GHL conversation



âœ… Updated tattoo fields for contact CZj67OBSzvUzpsExstqD with {



  tattoo_placement: 'forearm',



  tattoo_summary: 'skateboard tattoo on forearm'



}



âœ… Persisted field_updates: [ 'tattoo_placement', 'tattoo_summary' ]



ğŸ’¬ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•









ğŸ’¬ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•



ğŸ’¬ GHL MESSAGE WEBHOOK HIT



ğŸ’¬ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•



ğŸ“¦ Webhook Payload (non-empty fields): {



  "Tattoo Placement": "forearm",



  "Tattoo Summary": "skateboard tattoo on forearm",



  "contact_id": "CZj67OBSzvUzpsExstqD",



  "first_name": "Maria",



  "last_name": "Claflin",



  "full_name": "Maria Claflin",



  "tags": "dm consultation request",



  "country": "US",



  "date_created": "2025-12-15T06:37:39.685Z",



  "contact_type": "lead",



  "location": {



    "name": "Studio AZ Tattoo",



    "address": "333 Washington Ave N STE 100",



    "city": "Minneapolis",



    "state": "Minnesota",



    "country": "US",



    "postalCode": "55401",



    "fullAddress": "333 Washington Ave N STE 100, Minneapolis Minnesota 55401",



    "id": "mUemx2jG4wly4kJWBkI4"



  },



  "message": {



    "type": 11,



    "body": "I was thinking about 6inches long and 3 inches wide"



  },



  "workflow": {



    "id": "8cf237bb-6cb1-4240-8ca5-b797bba8b769",



    "name": "Testing Ai Bot"



  },



  "contact": {



    "attributionSource": {



      "photoUrl": null,



      "sessionSource": "Social media",



      "adId": null,



      "productId": null,



      "videoUrl": null,



      "mediumId": "24364584283244494",



      "utmContent": null,



      "pSid": "24364584283244494",



      "medium": "facebook",



      "postId": null,



      "flowId": null



    },



    "lastAttributionSource": {



      "photoUrl": null,



      "sessionSource": "Social media",



      "adId": null,



      "productId": null,



      "videoUrl": null,



      "mediumId": "24364584283244494",



      "utmContent": null,



      "pSid": "24364584283244494",



      "medium": "facebook",



      "postId": null,



      "flowId": null



    }



  },



  "customData": {



    "contactId": "CZj67OBSzvUzpsExstqD",



    "messageBody": "I was thinking about 6inches long and 3 inches wide"



  }



}



ğŸ“© Incoming message text: {



  type: 11,



  body: 'I was thinking about 6inches long and 3 inches wide'



}



ğŸ‘¤ Contact ID: CZj67OBSzvUzpsExstqD



ğŸ‘¤ Contact: Maria Claflin



ğŸ“‹ Contact custom fields (non-empty): {



  "0": {



    "id": "jd8YhvKsBi4aGqjqOEOv",



    "value": "forearm"



  },



  "1": {



    "id": "xAGtMfmbxtfCHdo2oyf7",



    "value": "skateboard tattoo on forearm"



  }



}



ğŸ¤– Raw OpenAI opener response: {



  "language": "en",



  "bubbles": [



    "Got it â€” about 6x3 inches, nice size.",



    "Where were you thinking of placing it?"



  ],



  "internal_notes": "Acknowledged size, asked for placement to continue intake.",



  "meta": {



    "aiPhase": "intake",



    "leadTemperature": "warm",



    "wantsDepositLink": false,



    "depositPushedThisTurn": false,



    "mentionDecoyOffered": false,



    "consultMode": "online"



  },



  "field_updates": {



    "size_of_tattoo": "6 inches long by 3 inches wide"



  }



}



ğŸ§­ [PHASE] derived_phase snapshot {



  derived_phase: 'intake',



  canonical: {



    tattooSummary: null,



    tattooPlacement: null,



    tattooSize: '6 inches long by 3 inches wide',



    timeline: null,



    consultationType: null,



    consultationTypeLocked: false,



    depositLinkSent: false,



    depositPaid: false,



    holdAppointmentId: null



  },



  intents: {



    reschedule_intent: false,



    cancel_intent: false,



    scheduling_intent: false,



    slot_selection_intent: false,



    deposit_intent: false,



    consult_path_choice_intent: false,



    artist_guided_size_intent: false,



    process_or_price_question_intent: false,



    translator_affirm_intent: false



  },



  selected_handler: 'ai',



  routing_reason: 'ai_fallback',



  intent_flags: []



}



ğŸ¤– AI Response Summary: {



  bubblesCount: 2,



  phase: 'intake',



  handler: 'ai',



  reason: 'ai_fallback',



  fieldUpdatesKeys: [ 'size_of_tattoo' ]



}



âœ‰ï¸ sendConversationMessage context: { contactId: 'CZj67OBSzvUzpsExstqD', isDm: false, hasPhone: false }



ğŸ“¨ GHL conversations API response (fallback): { status: 201, contactId: 'CZj67OBSzvUzpsExstqD', type: 'FB' }



âœ‰ï¸ sendConversationMessage context: { contactId: 'CZj67OBSzvUzpsExstqD', isDm: false, hasPhone: false }



ğŸ“¨ GHL conversations API response (fallback): { status: 201, contactId: 'CZj67OBSzvUzpsExstqD', type: 'FB' }



ğŸ“¤ Sent 2/2 bubbles to GHL conversation



âœ… Updated tattoo fields for contact CZj67OBSzvUzpsExstqD with { size_of_tattoo: '6 inches long by 3 inches wide' }



âœ… Persisted field_updates: [ 'size_of_tattoo' ]



ğŸ’¬ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•









ğŸ’¬ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•



ğŸ’¬ GHL MESSAGE WEBHOOK HIT



ğŸ’¬ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•



ğŸ“¦ Webhook Payload (non-empty fields): {



  "Tattoo Placement": "forearm",



  "Tattoo Size": "6 inches long by 3 inches wide",



  "Tattoo Summary": "skateboard tattoo on forearm",



  "contact_id": "CZj67OBSzvUzpsExstqD",



  "first_name": "Maria",



  "last_name": "Claflin",



  "full_name": "Maria Claflin",



  "tags": "dm consultation request",



  "country": "US",



  "date_created": "2025-12-15T06:37:39.685Z",



  "contact_type": "lead",



  "location": {



    "name": "Studio AZ Tattoo",



    "address": "333 Washington Ave N STE 100",



    "city": "Minneapolis",



    "state": "Minnesota",



    "country": "US",



    "postalCode": "55401",



    "fullAddress": "333 Washington Ave N STE 100, Minneapolis Minnesota 55401",



    "id": "mUemx2jG4wly4kJWBkI4"



  },



  "message": {



    "type": 11,



    "body": "My forearm"



  },



  "workflow": {



    "id": "8cf237bb-6cb1-4240-8ca5-b797bba8b769",



    "name": "Testing Ai Bot"



  },



  "contact": {



    "attributionSource": {



      "photoUrl": null,



      "sessionSource": "Social media",



      "adId": null,



      "productId": null,



      "videoUrl": null,



      "mediumId": "24364584283244494",



      "utmContent": null,



      "pSid": "24364584283244494",



      "medium": "facebook",



      "postId": null,



      "flowId": null



    },



    "lastAttributionSource": {



      "photoUrl": null,



      "sessionSource": "Social media",



      "adId": null,



      "productId": null,



      "videoUrl": null,



      "mediumId": "24364584283244494",



      "utmContent": null,



      "pSid": "24364584283244494",



      "medium": "facebook",



      "postId": null,



      "flowId": null



    }



  },



  "customData": {



    "contactId": "CZj67OBSzvUzpsExstqD",



    "messageBody": "My forearm"



  }



}



ğŸ“© Incoming message text: { type: 11, body: 'My forearm' }



ğŸ‘¤ Contact ID: CZj67OBSzvUzpsExstqD



ğŸ‘¤ Contact: Maria Claflin



ğŸ“‹ Contact custom fields (non-empty): {



  "0": {



    "id": "jd8YhvKsBi4aGqjqOEOv",



    "value": "forearm"



  },



  "1": {



    "id": "xAGtMfmbxtfCHdo2oyf7",



    "value": "skateboard tattoo on forearm"



  },



  "2": {



    "id": "w3MpAE5UMMS9pjr3BJmi",



    "value": "6 inches long by 3 inches wide"



  }



}



ğŸ¤– Raw OpenAI opener response: {



  "language": "en",



  "bubbles": [



    "Got it â€” forearm placement works great.",



    "What kind of design are you thinking for your piece?"



  ],



  "internal_notes": "Acknowledged placement, moving to clarify tattoo idea.",



  "meta": {



    "aiPhase": "intake",



    "leadTemperature": "warm",



    "wantsDepositLink": false,



    "depositPushedThisTurn": false,



    "mentionDecoyOffered": false,



    "consultMode": "online"



  },



  "field_updates": {



    "tattoo_placement": "forearm"



  }



}



ğŸ§­ [PHASE] derived_phase snapshot {



  derived_phase: 'intake',



  canonical: {



    tattooSummary: null,



    tattooPlacement: 'forearm',



    tattooSize: null,



    timeline: null,



    consultationType: null,



    consultationTypeLocked: false,



    depositLinkSent: false,



    depositPaid: false,



    holdAppointmentId: null



  },



  intents: {



    reschedule_intent: false,



    cancel_intent: false,



    scheduling_intent: false,



    slot_selection_intent: false,



    deposit_intent: false,



    consult_path_choice_intent: false,



    artist_guided_size_intent: false,



    process_or_price_question_intent: false,



    translator_affirm_intent: false



  },



  selected_handler: 'ai',



  routing_reason: 'ai_fallback',



  intent_flags: []



}



ğŸ¤– AI Response Summary: {



  bubblesCount: 2,



  phase: 'intake',



  handler: 'ai',



  reason: 'ai_fallback',



  fieldUpdatesKeys: [ 'tattoo_placement' ]



}



âœ‰ï¸ sendConversationMessage context: { contactId: 'CZj67OBSzvUzpsExstqD', isDm: false, hasPhone: false }



ğŸ“¨ GHL conversations API response (fallback): { status: 201, contactId: 'CZj67OBSzvUzpsExstqD', type: 'FB' }



âœ‰ï¸ sendConversationMessage context: { contactId: 'CZj67OBSzvUzpsExstqD', isDm: false, hasPhone: false }



ğŸ“¨ GHL conversations API response (fallback): { status: 201, contactId: 'CZj67OBSzvUzpsExstqD', type: 'FB' }



ğŸ“¤ Sent 2/2 bubbles to GHL conversation



âœ… Updated tattoo fields for contact CZj67OBSzvUzpsExstqD with { tattoo_placement: 'forearm' }



âœ… Persisted field_updates: [ 'tattoo_placement' ]



ğŸ’¬ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
